# name: Production

# on:
#   push:
#     branches:
#       - main

# jobs:
#   deploy:
#     name: Publising pipeline
#     runs-on: self-hosted
#     container:
#       image: ubuntu:latest

#     steps:
#       - name: CHECKOUT project
#         uses: actions/checkout@v3
#         with:
#           repository: aziontech/brazilmentioned.com
#           ref: main
#           path: '.'
#           clean: true
#           fetch-depth: '0'
#           lfs: 'false'

#       - name: SETTING Node and Github Packages
#         uses: actions/setup-node@v3
#         with:
#           node-version: 20.8.1
#           registry-url: 'https://npm.pkg.github.com'
#           scope: '@aziontech'
#           always-auth: true
#         env:
#           NODE_AUTH_TOKEN: ${{ secrets.GH_PACKAGES_SECRET }}

#       - name: INSTALLING DEPENDENCIES
#         run: npm install

#       - name: CHECKER
#         run: npm run astro check

#       - name: BUILD
#         run: npm run build &&  mv dist/* ./

#       - name: PREPARE TO DEPLOYMENT
#         run: rm -rf .nvmrc .cloudcannon cloudcannon.config.yml .astro .github dist node_modules src .editorconfig .gitignore astro.config.mjs LICENSE package-lock.json package.json README.md tsconfig.json

#       # - name: DEPLOYMENT
#       #   uses: patrickwyler/gcs-bucket-sync-action@1.3
#       #   with:
#       #     secrets: ${{ secrets.GCP_EXP_ENG }}
#       #     # bucket: azsite
